apiVersion: v1
items:
- apiVersion: v1
  data:
    managed-clusters.json: |-
     {
          "annotations": {
          "list": [
              {
              "builtIn": 1,
              "datasource": "-- Grafana --",
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "type": "dashboard"
              }
          ]
          },
          "description": "Monitors managed cluster using Prometheus. Shows overall cluster CPU / Memory / Filesystem usage as well as individual pod, containers, systemd services statistics. Uses cAdvisor metrics only.",
          "editable": true,
          "gnetId": 315,
          "graphTooltip": 0,
          "id": null,
          "iteration": 1544034411339,
          "links": [],
          "panels": [
            {
              "columns": [],
              "datasource": "$datasource",
              "fontSize": "100%",
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 0
              },
              "id": 6,
              "options": {},
              "pageSize": null,
              "showHeader": true,
              "sort": {
                "col": 0,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Time",
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "pattern": "Time",
                  "type": "hidden"
                },
                {
                  "alias": "Cluster",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "link": true,
                  "linkTooltip": "drill down to cluster",
                  "linkUrl": "./d/efa86fd1d0c121a26444b636a3f509a8/kubernetes-compute-resources-cluster?var-cluster=$__cell_1",
                  "pattern": "cluster",
                  "thresholds": [],
                  "type": "string",
                  "unit": "short"
                },
                {
                  "alias": "Pods",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "Namespaces",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 0,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "expr": "sum(cluster:usage:resources:sum{resource=~\"namespaces\"}) by (cluster)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "B"
                },
                {
                  "expr": "sum(cluster:usage:resources:sum{resource=~\"pods\"}) by (cluster)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "refId": "A"
                }
              ],
              "timeFrom": null,
              "timeShift": null,
              "title": "Cluster Resources",
              "transform": "table",
              "type": "table"
            },
            {
              "columns": [],
              "datasource": "$datasource",
              "fontSize": "100%",
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 8
              },
              "id": 2,
              "options": {},
              "pageSize": null,
              "showHeader": true,
              "sort": {
                "col": 2,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Time",
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "pattern": "Time",
                  "type": "hidden"
                },
                {
                  "alias": "Cluster",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "link": true,
                  "linkTargetBlank": false,
                  "linkTooltip": "drill down to cluster",
                  "linkUrl": "./d/efa86fd1d0c121a26444b636a3f509a8/kubernetes-compute-resources-cluster?var-cluster=$__cell_1",
                  "pattern": "cluster",
                  "thresholds": [],
                  "type": "string",
                  "unit": "short"
                },
                {
                  "alias": "CPU Usage Cores",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "CPU Usage%",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "percentunit"
                },
                {
                  "alias": "CPU Requests%",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "percentunit"
                }
              ],
              "targets": [
                {
                  "expr": "sum(cluster:cpu_usage_cores:sum) by (cluster)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 2,
                  "refId": "C"
                },
                {
                  "expr": "sum(cluster:container_cpu_usage:ratio) by (cluster)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 2,
                  "refId": "A"
                },
                {
                  "expr": "sum(cluster:container_spec_cpu_shares:ratio) by (cluster)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 2,
                  "refId": "B"
                }
              ],
              "timeFrom": null,
              "timeShift": null,
              "title": "Clusters CPU Usage",
              "transform": "table",
              "type": "table"
            },
            {
              "columns": [],
              "datasource": "$datasource",
              "fontSize": "100%",
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 17
              },
              "id": 4,
              "options": {},
              "pageSize": null,
              "showHeader": true,
              "sort": {
                "col": 0,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Time",
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "pattern": "Time",
                  "type": "hidden"
                },
                {
                  "alias": "Cluster",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "link": true,
                  "linkTooltip": "drill down to cluster",
                  "linkUrl": "./d/efa86fd1d0c121a26444b636a3f509a8/kubernetes-compute-resources-cluster?var-cluster=$__cell_1",
                  "pattern": "cluster",
                  "thresholds": [],
                  "type": "string",
                  "unit": "short"
                },
                {
                  "alias": "Memory Usage Byte",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "Memory Usage%",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "percentunit"
                }
              ],
              "targets": [
                {
                  "expr": "sum(cluster:memory_usage_bytes:sum) by (cluster)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 2,
                  "refId": "A"
                },
                {
                  "expr": "sum(cluster:memory_usage:ratio) by (cluster)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 2,
                  "refId": "B"
                }
              ],
              "timeFrom": null,
              "timeShift": null,
              "title": "Cluster Memory Usage",
              "transform": "table",
              "type": "table"
            }
          ],
          "refresh": "1m",
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
          "ACM"
          ],
          "templating": {
          "list": [
            {
              "current": {
                  "text": "default",
                  "value": "default"
              },
              "hide": 2,
              "label": null,
              "name": "datasource",
              "options": [

              ],
              "query": "prometheus",
              "refresh": 1,
              "regex": "",
              "type": "datasource"
          }
          ]
          },
          "time": {
          "from": "now-5m",
          "to": "now"
          },
          "timepicker": {
          "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
          ],
          "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
          ]
          },
          "timezone": "browser",
          "title": "ACM: Spoke Cluster Monitoring",
          "version": 1
        }
  kind: ConfigMap
  metadata:
    name: grafana-dashboard-managed-clusters
    namespace: open-cluster-management
kind: ConfigMapList
